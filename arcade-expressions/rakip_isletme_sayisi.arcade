var point = Geometry($feature)
var buffer = Buffer(point, 1000)

var rakipler = Filter(
    FeatureSetByName($map, "ÃœskÃ¼dar Belediyesi Ä°ÅŸyeri Yerleri"),
    "anafaaliye = '" + $feature.anafaaliye + "'"
)

var yakindakiler = Intersects(rakipler, buffer)

var tÃ¼rler = {}
for (var f in yakindakiler) {
    var a = f.anafaaliye  // â† doÄŸru alan adÄ± burada
    if (HasKey(tÃ¼rler, a)) {
        tÃ¼rler[a] += 1
    } else {
        tÃ¼rler[a] = 1
    }
}

var sonuc = ""
for (var k in tÃ¼rler) {
    sonuc += k + ": " + tÃ¼rler[k] + TextFormatting.NewLine
}

return "ğŸ“Œ 1 km Ã§evresindeki benzer iÅŸletmeler:\n" + sonuc
